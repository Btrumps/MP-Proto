<canvas id = "ctx" width = "500" height = "500" style = "border:1px solid #000000;"></canvas> <!--- creates canvas --->

<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
<script>
	var ctx = document.getElementById("ctx").getContext("2d");
	ctx.font = '30px Arial';

	document.addEventListener('keydown', keyDownHandler);
	document.addEventListener('keyup', keyUpHandler);

	var socket = io();

	socket.on('newPositions', function(data) {
		ctx.clearRect(0,0,500,500); // clears canvas
		for (var i = 0; i < data.player.length; i++) {
			ctx.fillText(data.player[i].number, data.player[i].x, data.player[i].y);
		}

		for (var i = 0; i < data.bullet.length; i++) {
			ctx.fillRect(data.bullet[i].x-5, data.bullet[i].y-5, 10,10);
		}
	});


	function keyDownHandler(evt) {
		setValuesForKey(evt, true);
	}

	function keyUpHandler(evt) {
		setValuesForKey(evt, false);		
	}

	function setValuesForKey(evt, value) {
		switch (evt.code) {
			case "KeyW":
				socket.emit('keyPress', {inputId:'up', state: value});
				break;
			case "KeyS":
				socket.emit('keyPress', {inputId:'down', state: value});
				break;
			case "KeyA":
				socket.emit('keyPress', {inputId:'left', state: value});
				break;
			case "KeyD":
				socket.emit('keyPress', {inputId:'right', state: value});
				break;

		}
	}

</script>
